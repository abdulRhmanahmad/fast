import pinecone
from openai import OpenAI
import os
import time

# ================================
# ๐ ููุงุชูุญ API
# ================================
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "ุถุน_ููุชุงุญ_OpenAI_ููุง")
PINECONE_API_KEY = os.getenv("PINECONE_API_KEY", "ุถุน_ููุชุงุญ_Pinecone_ููุง")
PINECONE_ENV = os.getenv("PINECONE_ENV", "gcp-starter")  # ูุซุงู: gcp-starter ุฃู us-east4-gcp

# ================================
# ๐ ุฑุจุท OpenAI ู Pinecone
# ================================
client = OpenAI(api_key=OPENAI_API_KEY)
pinecone.init(api_key=PINECONE_API_KEY, environment=PINECONE_ENV)

index_name = "places-index"

# ุฅูุดูุงุก index ุฅุฐุง ูุด ููุฌูุฏ
if index_name not in pinecone.list_indexes():
    pinecone.create_index(
        name=index_name,
        dimension=1536,  # ููุณ ุญุฌู Embedding OpenAI
        metric="cosine"
    )
index = pinecone.Index(index_name)

# ================================
# ๐ฆ ุฏุงูุฉ ุชูููุฏ Embedding
# ================================
def get_embedding(text):
    response = client.embeddings.create(
        model="text-embedding-3-small",
        input=[text]
    )
    return response.data[0].embedding

# ================================
# ๐บ๏ธ ูุงุฆูุฉ ุงูุฃูุงูู (ุงุฎุชุตุฑูุง โ ููุซุงู)
# ================================
known_places_embedding = {


"ุงูุฌูุฑุฉ": "ุงูุฌูุฑุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุนูุงุฑุฉ ุงูุฌูุงููุฉ": "ุงูุนูุงุฑุฉ ุงูุฌูุงููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุจุงุจ ุชููุง": "ุจุงุจ ุชููุงุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููููุฑูุฉ": "ุงููููุฑูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุญููุฏูุฉ": "ุงูุญููุฏูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุญุฑููุฉ": "ุงูุญุฑููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฃููู": "ุงูุฃูููุ ุฏูุดูุ ุณูุฑูุง",
    "ูุฆุฐูุฉ ุงูุดุญู": "ูุฆุฐูุฉ ุงูุดุญูุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุบูุฑ ุฌูุงูู": "ุดุงุบูุฑ ุฌูุงููุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุณุงุฑูุฌุฉ": "ุณูู ุณุงุฑูุฌุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุนููุจุฉ": "ุงูุนููุจุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุนูุงุฑุฉ ุงูุจุฑุงููุฉ": "ุงูุนูุงุฑุฉ ุงูุจุฑุงููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ูุณุฌุฏ ุงูุฃูุตุงุจ": "ูุณุฌุฏ ุงูุฃูุตุงุจุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุตุงุน": "ุงููุตุงุนุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุนุฏูู": "ุงูุนุฏููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุตูุฑ": "ุงููุตูุฑุ ุฏูุดูุ ุณูุฑูุง",
    "ูุงุฑุณ ุงูุฎูุฑู": "ูุงุฑุณ ุงูุฎูุฑูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููููุงุช": "ุงููููุงุชุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุญุฌุงุฒ": "ุงูุญุฌุงุฒุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุจุฑุงููุฉ": "ุงูุจุฑุงููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุจุงุจ ุงูุฌุงุจูุฉ": "ุจุงุจ ุงูุฌุงุจูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุจุงุจ ุณุฑูุฌุฉ": "ุจุงุจ ุณุฑูุฌุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุณูููุฉ": "ุงูุณูููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ูุจุฑ ุนุงุชูุฉ": "ูุจุฑ ุนุงุชูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฌุชูุฏ": "ุงููุฌุชูุฏุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฃูุตุงุฑู": "ุงูุฃูุตุงุฑูุ ุฏูุดูุ ุณูุฑูุง",
    "ุฌูุจุฑ ุงูุดุฑูู": "ุฌูุจุฑ ุงูุดุฑููุ ุฏูุดูุ ุณูุฑูุง",
    "ุฌูุจุฑ ุงูุบุฑุจู": "ุฌูุจุฑ ุงูุบุฑุจูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฃููููุฉ": "ุงููุฃููููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุงุณุชููุงู": "ุงูุงุณุชููุงูุ ุฏูุดูุ ุณูุฑูุง",
    "ููุฏุงู ูุณุทุงูู": "ููุฏุงู ูุณุทุงููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฒุงูุฑุฉ": "ุงูุฒุงูุฑุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุญููุฉ": "ุงูุญููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฏูุงู": "ุงูุฏูุงูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุงุนุฉ": "ุงููุงุนุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุจุงุจ ูุตูู": "ุจุงุจ ูุตููุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุบูุฑ ุจุฑุงูู": "ุดุงุบูุฑ ุจุฑุงููุ ุฏูุดูุ ุณูุฑูุง",
    "ุจุงุจ ุดุฑูู": "ุจุงุจ ุดุฑููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงุจู ุนุณุงูุฑ": "ุงุจู ุนุณุงูุฑุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุถุงู": "ุงููุถุงูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุญุฏุฉ": "ุงููุญุฏุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุจูุงู": "ุจูุงูุ ุฏูุดูุ ุณูุฑูุง",
    "ุฑูุถุฉ ุงูููุฏุงู": "ุฑูุถุฉ ุงูููุฏุงูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฒููุฑ": "ุงูุฒููุฑุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุชุถุงูู": "ุงูุชุถุงููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุณูุฏุฉ ุนุงุฆุดุฉ": "ุงูุณูุฏุฉ ุนุงุฆุดุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฏู": "ุงููุฏูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุตุทูู": "ุงููุตุทููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุดุฑูุจุงุชู": "ุงูุดุฑูุจุงุชูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุนุณุงูู": "ุงูุนุณุงููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฏู ุงูุดุฑูู": "ุงููุฏู ุงูุดุฑููุ ุฏูุดูุ ุณูุฑูุง",
    "ููุฑุณูุณุฉ ุงูุจูุฏ": "ููุฑุณูุณุฉ ุงูุจูุฏุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฅุฎูุงุต": "ุงูุฅุฎูุงุตุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุงุญุฉ": "ุงููุงุญุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฑุฏูุณ": "ุงููุฑุฏูุณุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูููุงู": "ุงูููุงูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฑุจูุฉ": "ุงูุฑุจูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฒุฉ ุงููุฏููุฉ": "ุงููุฒุฉ ุงููุฏููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฌูุงุก": "ุงูุฌูุงุกุ ุฏูุดูุ ุณูุฑูุง",
    "ูุฒุฉ ุฌุจู": "ูุฒุฉ ุฌุจูุ ุฏูุดูุ ุณูุฑูุง",
    "ูููุงุช ุดุฑููุฉ": "ูููุงุช ุดุฑููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ูููุงุช ุบุฑุจูุฉ": "ูููุงุช ุบุฑุจูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ูุฒุฉ 86": "ูุฒุฉ 86ุ ุฏูุดูุ ุณูุฑูุง",
    "ูุฒุฉ ุจุณุงุชูู": "ูุฒุฉ ุจุณุงุชููุ ุฏูุดูุ ุณูุฑูุง",
    "ูุดุฑูุน ุฏูุฑ": "ูุดุฑูุน ุฏูุฑุ ุฏูุดูุ ุณูุฑูุง",
    "ุฏูุฑ ุงูุดุฑููุฉ": "ุฏูุฑ ุงูุดุฑููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุฏูุฑ ุงูุบุฑุจูุฉ": "ุฏูุฑ ุงูุบุฑุจูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุนุฑูู": "ุงูุนุฑููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฑูุฏ": "ุงููุฑูุฏุ ุฏูุดูุ ุณูุฑูุง",
    "ุจุฑุฒุฉ ุงูุจูุฏ": "ุจุฑุฒุฉ ุงูุจูุฏุ ุฏูุดูุ ุณูุฑูุง",
    "ูุณุงูู ุจุฑุฒุฉ": "ูุณุงูู ุจุฑุฒุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูููุงุฑุฉ": "ุงูููุงุฑุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุนุจุงุณ": "ุงูุนุจุงุณุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฒูุฉ": "ุงููุฒูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุนุด ุงููุฑูุฑ": "ุนุด ุงููุฑูุฑุ ุฏูุดูุ ุณูุฑูุง",
    "ุชุดุฑูู": "ุชุดุฑููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุงุจูู": "ุงููุงุจููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุตุงูุน": "ุงููุตุงูุนุ ุฏูุดูุ ุณูุฑูุง",
    "ุฃุณุฏ ุงูุฏูู": "ุฃุณุฏ ุงูุฏููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูููุดุจูุฏู": "ุงูููุดุจูุฏูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฃููุจูุฉ": "ุงูุฃููุจูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูููุญุงุก": "ุงูููุญุงุกุ ุฏูุดูุ ุณูุฑูุง",
    "ูุงุณููู": "ูุงุณูููุ ุฏูุดูุ ุณูุฑูุง",
    "ุฃุจู ุฌุฑุด": "ุฃุจู ุฌุฑุดุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุดูุฎ ูุญู ุงูุฏูู": "ุงูุดูุฎ ูุญู ุงูุฏููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฏุงุฑุณ": "ุงููุฏุงุฑุณุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฒุฑุนุฉ": "ุงููุฒุฑุนุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุดูุฏุงุก": "ุงูุดูุฏุงุกุ ุฏูุดูุ ุณูุฑูุง",
    "ุดูุฑู": "ุดูุฑูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุตุทุจุฉ": "ุงููุตุทุจุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฑุงุจุท": "ุงููุฑุงุจุทุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุฑูุถุฉ": "ุงูุฑูุถุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุฃุจู ุฑูุงูุฉ": "ุฃุจู ุฑูุงูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุงููู": "ุงููุงูููุ ุฏูุดูุ ุณูุฑูุง",
    "ุงูุญุจูุจู": "ุงูุญุจูุจูุ ุฏูุดูุ ุณูุฑูุง",
    "ุงููุฑูู": "ุงููุฑููุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุงูุซูุฑุฉ": "ุดุงุฑุน ุงูุซูุฑุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุงูุญูุฑุงุก": "ุดุงุฑุน ุงูุญูุฑุงุกุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุจุบุฏุงุฏ": "ุดุงุฑุน ุจุบุฏุงุฏุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุฎุงูุฏ ุจู ุงููููุฏ": "ุดุงุฑุน ุฎุงูุฏ ุจู ุงููููุฏุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุดูุฑู ุงูููุชูู": "ุดุงุฑุน ุดูุฑู ุงูููุชููุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุงูุนุงุจุฏ": "ุดุงุฑุน ุงูุนุงุจุฏุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุงููุตุฑ": "ุดุงุฑุน ุงููุตุฑุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุงูุตุงูุญูุฉ": "ุดุงุฑุน ุงูุตุงูุญูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุดุงุฑุน ุงูุจุฏูู": "ุดุงุฑุน ุงูุจุฏููุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุญููุฏูุฉ": "ุณูู ุงูุญููุฏูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ูุฏุญุช ุจุงุดุง": "ุณูู ูุฏุญุช ุจุงุดุงุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุญุฑููุฉ": "ุณูู ุงูุญุฑููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุนุตุฑูููุฉ": "ุณูู ุงูุนุตุฑูููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุตุงุบุฉ": "ุณูู ุงูุตุงุบุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูููุงุฎููุฉ": "ุณูู ุงูููุงุฎููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุฎูุงุทูู": "ุณูู ุงูุฎูุงุทููุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุณุฑูุฌูุฉ": "ุณูู ุงูุณุฑูุฌูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงููุจุงูุจูุฉ": "ุณูู ุงููุจุงูุจูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงููุงู": "ุณูู ุงููุงูุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุฌุฒูุงุชูุฉ": "ุณูู ุงูุฌุฒูุงุชูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุฌูุนุฉ": "ุณูู ุงูุฌูุนุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุฏุฑููุดูุฉ": "ุณูู ุงูุฏุฑููุดูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุณูุงููุฉ": "ุณูู ุงูุณูุงููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุณูููุฉ": "ุณูู ุงูุณูููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุนุชูู": "ุณูู ุงูุนุชููุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงููุญุงุณูู": "ุณูู ุงููุญุงุณููุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงููุญุงุชูู": "ุณูู ุงููุญุงุชููุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูููู ุงููุฏููุฉ": "ุณูู ุงูููู ุงููุฏููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุจุงุจ ุงูุฌุงุจูุฉ": "ุณูู ุจุงุจ ุงูุฌุงุจูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุตุงุฑูุฌุง": "ุณูู ุตุงุฑูุฌุงุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงููุจูุจุงุช": "ุณูู ุงููุจูุจุงุชุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุฎุฌุง": "ุณูู ุงูุฎุฌุงุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุณูุฑูุฉ": "ุณูู ุงูุณูุฑูุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุณูุฌูุฏุงุฑ": "ุณูู ุงูุณูุฌูุฏุงุฑุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงููุณููุฉ": "ุณูู ุงููุณููุฉุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุตูุงููู": "ุณูู ุงูุตูุงูููุ ุฏูุดูุ ุณูุฑูุง",
    "ุณูู ุงูุฌูุฑู": "ุณูู ุงูุฌูุฑูุ ุฏูุดูุ ุณูุฑูุง"
}

# ================================
# โฌ๏ธ ุฑูุน ุงูุจูุงูุงุช ุฅูู Pinecone
# ================================
for name, address in known_places_embedding.items():
    try:
        vector = get_embedding(name)
        index.upsert([(f"place-{name}", vector, {"address": address})])
        print(f"โ ุชู ุฑูุน: {name}")
        time.sleep(0.5)
    except Exception as e:
        print(f"โ ุฎุทุฃ ุฃุซูุงุก ุฑูุน {name}: {e}")
